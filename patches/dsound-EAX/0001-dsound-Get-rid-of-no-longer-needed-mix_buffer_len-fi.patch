From 8f6390553dc5a0c32a4d6eb4fa73be0854acee37 Mon Sep 17 00:00:00 2001
From: Sebastian Lackner <sebastian@fds-team.de>
Date: Sun, 15 May 2016 02:13:18 +0200
Subject: dsound: Get rid of no longer needed mix_buffer_len field.

---
 dlls/dsound/dsound_private.h | 2 +-
 dlls/dsound/primary.c        | 5 +----
 2 files changed, 2 insertions(+), 5 deletions(-)

diff --git a/dlls/dsound/dsound_private.h b/dlls/dsound/dsound_private.h
index b980453..8bf9c9d 100644
--- a/dlls/dsound/dsound_private.h
+++ b/dlls/dsound/dsound_private.h
@@ -88,7 +88,7 @@ struct DirectSoundDevice
     int                         num_speakers;
     int                         lfe_channel;
     float *tmp_buffer;
-    DWORD                       tmp_buffer_len, mix_buffer_len;
+    DWORD                       tmp_buffer_len;
 
     DSVOLUMEPAN                 volpan;
 
diff --git a/dlls/dsound/primary.c b/dlls/dsound/primary.c
index 1925d0c..a5fe039 100644
--- a/dlls/dsound/primary.c
+++ b/dlls/dsound/primary.c
@@ -338,8 +338,6 @@ HRESULT DSOUND_PrimaryOpen(DirectSoundDevice *device)
 		device->buflen = ds_hel_buflen;
 	device->buflen -= device->buflen % device->pwfx->nBlockAlign;
 
-	device->mix_buffer_len = (device->buflen / (device->pwfx->wBitsPerSample / 8)) * sizeof(float);
-
 	if (device->state == STATE_PLAYING) device->state = STATE_STARTING;
 	else if (device->state == STATE_STOPPING) device->state = STATE_STOPPED;
 
@@ -359,8 +357,7 @@ HRESULT DSOUND_PrimaryOpen(DirectSoundDevice *device)
 
     device->buffer = newbuf;
 
-    TRACE("buflen: %u, fraglen: %u, mix_buffer_len: %u\n",
-            device->buflen, device->fraglen, device->mix_buffer_len);
+    TRACE("buflen: %u, fraglen: %u\n", device->buflen, device->fraglen);
 
     if(device->pwfx->wFormatTag == WAVE_FORMAT_IEEE_FLOAT ||
             (device->pwfx->wFormatTag == WAVE_FORMAT_EXTENSIBLE &&
-- 
2.8.0

