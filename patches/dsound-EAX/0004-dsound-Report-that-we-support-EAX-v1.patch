From 293bff08260858a815cf2acc863da482bc53522a Mon Sep 17 00:00:00 2001
From: Mark Harmstone <mark@harmstone.com>
Date: Sun, 15 Mar 2015 18:04:38 +0000
Subject: [PATCH 04/18] dsound: Report that we support EAX v1.
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="------------2.0.5"

This is a multi-part message in MIME format.
--------------2.0.5
Content-Type: text/plain; charset=UTF-8; format=fixed
Content-Transfer-Encoding: 8bit

---
 dlls/dsound/buffer.c | 12 ++++++++++++
 1 file changed, 12 insertions(+)


--------------2.0.5
Content-Type: text/x-patch; name="0004-dsound-Report-that-we-support-EAX-v1.patch"
Content-Transfer-Encoding: 8bit
Content-Disposition: attachment; filename="0004-dsound-Report-that-we-support-EAX-v1.patch"

diff --git a/dlls/dsound/buffer.c b/dlls/dsound/buffer.c
index 7df6348..a0db5db 100644
--- a/dlls/dsound/buffer.c
+++ b/dlls/dsound/buffer.c
@@ -1322,6 +1322,18 @@ static HRESULT WINAPI IKsPropertySetImpl_QuerySupport(IKsPropertySet *iface, REF
 
     TRACE("(%p,%s,%d,%p)\n",This,debugstr_guid(guidPropSet),dwPropID,pTypeSupport);
 
+    if (IsEqualGUID(&DSPROPSETID_EAX_ReverbProperties, guidPropSet)) {
+        if (dwPropID <= DSPROPERTY_EAX_DAMPING) {
+            *pTypeSupport = KSPROPERTY_SUPPORT_GET | KSPROPERTY_SUPPORT_SET;
+            return S_OK;
+        }
+    } else if (IsEqualGUID(&DSPROPSETID_EAXBUFFER_ReverbProperties, guidPropSet)) {
+        if (dwPropID <= DSPROPERTY_EAXBUFFER_REVERBMIX) {
+            *pTypeSupport = KSPROPERTY_SUPPORT_GET | KSPROPERTY_SUPPORT_SET;
+            return S_OK;
+        }
+    }
+
     return E_PROP_ID_UNSUPPORTED;
 }
 

--------------2.0.5--


