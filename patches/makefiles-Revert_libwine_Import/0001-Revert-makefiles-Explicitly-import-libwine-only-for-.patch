From 6ed4b42de6f399c2d0a999a5eb1d703b96849940 Mon Sep 17 00:00:00 2001
From: "Erich E. Hoover" <erich.e.hoover@wine-staging.com>
Date: Sun, 13 Mar 2016 13:41:21 -0600
Subject: Revert "makefiles: Explicitly import libwine only for Windows
 builds."

This reverts commit 3ebbfd5b6b96877c06de5fab9ec88fd6252d7787.

Signed-off-by: Erich E. Hoover <erich.e.hoover@wine-staging.com>
---
 tools/makedep.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/tools/makedep.c b/tools/makedep.c
index 8cbba1b..43b11a7 100644
--- a/tools/makedep.c
+++ b/tools/makedep.c
@@ -2653,12 +2653,13 @@ static struct strarray output_sources( const struct makefile *make )
         strarray_addall( &all_libs, add_import_libs( make, &dep_libs, make->delayimports, 0 ));
         strarray_addall( &all_libs, add_import_libs( make, &dep_libs, make->imports, 0 ));
         add_import_libs( make, &dep_libs, get_default_imports( make ), 0 );  /* dependencies only */
+        for (i = 0; i < make->delayimports.count; i++)
+            strarray_add( &all_libs, strmake( "-Wb,-d%s", make->delayimports.str[i] ));
+        strarray_add( &all_libs, "-lwine" );
         strarray_addall( &all_libs, add_default_libraries( make, &dep_libs ));
 
         if (*dll_ext)
         {
-            for (i = 0; i < make->delayimports.count; i++)
-                strarray_add( &all_libs, strmake( "-Wb,-d%s", make->delayimports.str[i] ));
             strarray_add( &all_targets, strmake( "%s%s", make->module, dll_ext ));
             strarray_add( &all_targets, strmake( "%s.fake", make->module ));
             add_install_rule( make, install_rules, make->module, strmake( "%s%s", make->module, dll_ext ),
@@ -2669,7 +2670,6 @@ static struct strarray output_sources( const struct makefile *make )
         }
         else
         {
-            strarray_add( &all_libs, "-lwine" );
             strarray_add( &all_targets, make->module );
             add_install_rule( make, install_rules, make->module, make->module,
                               strmake( "p$(%s)/%s", spec_file ? "dlldir" : "bindir", make->module ));
-- 
2.7.1

