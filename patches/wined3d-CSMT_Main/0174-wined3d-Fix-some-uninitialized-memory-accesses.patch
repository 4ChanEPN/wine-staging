From ae26ae32cd73d0ca290196ac9dc02a641c77ed54 Mon Sep 17 00:00:00 2001
From: Sebastian Lackner <sebastian@fds-team.de>
Date: Sun, 14 Dec 2014 15:24:44 +0100
Subject: wined3d: Fix some uninitialized memory accesses.

---
 dlls/wined3d/device.c  | 3 +--
 dlls/wined3d/surface.c | 2 +-
 2 files changed, 2 insertions(+), 3 deletions(-)

diff --git a/dlls/wined3d/device.c b/dlls/wined3d/device.c
index be1ecd6..93331b4 100644
--- a/dlls/wined3d/device.c
+++ b/dlls/wined3d/device.c
@@ -3373,7 +3373,6 @@ static HRESULT device_update_volume(struct wined3d_context *context,
         struct wined3d_volume *src_volume, struct wined3d_volume *dst_volume)
 {
     struct wined3d_const_bo_address data;
-    HRESULT hr;
 
     TRACE("src_volume %p, dst_volume %p.\n",
             src_volume, dst_volume);
@@ -3397,7 +3396,7 @@ static HRESULT device_update_volume(struct wined3d_context *context,
     wined3d_volume_upload_data(dst_volume, context, &data);
     wined3d_resource_invalidate_location(&dst_volume->resource, ~WINED3D_LOCATION_TEXTURE_RGB);
 
-    return hr;
+    return WINED3D_OK;
 }
 
 /* Context activation is done by the caller */
diff --git a/dlls/wined3d/surface.c b/dlls/wined3d/surface.c
index bf37b7d..9c3f7ce 100644
--- a/dlls/wined3d/surface.c
+++ b/dlls/wined3d/surface.c
@@ -770,7 +770,7 @@ static void surface_blt_fbo(const struct wined3d_device *device,
 
     if (required_rt && required_rt != old_ctx->current_rt)
     {
-        restore_rt = context->current_rt;
+        restore_rt = old_ctx->current_rt;
         context = context_acquire(device, required_rt);
     }
     else
-- 
1.9.1

