From a8a191d592e1c7202929d272b37afe5a2a347f40 Mon Sep 17 00:00:00 2001
From: Sebastian Lackner <sebastian@fds-team.de>
Date: Sun, 14 Dec 2014 15:24:44 +0100
Subject: wined3d: Fix some uninitialized memory accesses.

---
 dlls/wined3d/device.c  | 3 +--
 dlls/wined3d/surface.c | 2 +-
 2 files changed, 2 insertions(+), 3 deletions(-)

diff --git a/dlls/wined3d/device.c b/dlls/wined3d/device.c
index 7bc6aeb..50376f7 100644
--- a/dlls/wined3d/device.c
+++ b/dlls/wined3d/device.c
@@ -3370,7 +3370,6 @@ void CDECL wined3d_device_draw_indexed_primitive_instanced(struct wined3d_device
 static HRESULT device_update_volume(struct wined3d_context *context,
         struct wined3d_volume *src_volume, struct wined3d_volume *dst_volume)
 {
-    HRESULT hr;
     struct wined3d_bo_address data;
 
     TRACE("src_volume %p, dst_volume %p.\n",
@@ -3395,7 +3394,7 @@ static HRESULT device_update_volume(struct wined3d_context *context,
     wined3d_volume_upload_data(dst_volume, context, &data);
     wined3d_resource_invalidate_location(&dst_volume->resource, ~WINED3D_LOCATION_TEXTURE_RGB);
 
-    return hr;
+    return WINED3D_OK;
 }
 
 /* Context activation is done by the caller */
diff --git a/dlls/wined3d/surface.c b/dlls/wined3d/surface.c
index 9ab0738..9a2bcf7 100644
--- a/dlls/wined3d/surface.c
+++ b/dlls/wined3d/surface.c
@@ -770,7 +770,7 @@ static void surface_blt_fbo(const struct wined3d_device *device,
 
     if (required_rt && required_rt != old_ctx->current_rt)
     {
-        restore_rt = context->current_rt;
+        restore_rt = old_ctx->current_rt;
         context = context_acquire(device, required_rt);
     }
     else
-- 
2.1.3

