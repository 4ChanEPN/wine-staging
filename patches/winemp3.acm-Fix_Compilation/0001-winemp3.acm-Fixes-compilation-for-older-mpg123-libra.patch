From c112987a861f6d9bbb4813a95ed02667f0653462 Mon Sep 17 00:00:00 2001
From: Bruno Jesus <00cpxxx@gmail.com>
Date: Sun, 19 Feb 2017 22:16:18 -0300
Subject: winemp3.acm: Fixes compilation for older mpg123 library versions (try
 2)

Thanks to Sebastian Lackner for the correct approach.

Signed-off-by: Bruno Jesus <00cpxxx@gmail.com>
---
 dlls/winemp3.acm/mpegl3.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/dlls/winemp3.acm/mpegl3.c b/dlls/winemp3.acm/mpegl3.c
index 4a9f8949b1b..4da7541fdee 100644
--- a/dlls/winemp3.acm/mpegl3.c
+++ b/dlls/winemp3.acm/mpegl3.c
@@ -262,12 +262,14 @@ static	LRESULT	MPEG3_StreamOpen(PACMDRVSTREAMINSTANCE adsi)
         aad->mh = mpg123_new(NULL,&err);
         mpg123_open_feed(aad->mh);
 
+#if MPG123_API_VERSION >= 31 /* needed for MPG123_IGNORE_FRAMEINFO enum value */
         /* mpg123 may find a XING header in the mp3 and use that information
          * to ask for seeks in order to read specific frames in the file.
          * We cannot allow that since the caller application is feeding us.
          * This fixes problems for mp3 files encoded with LAME (bug 42361)
          */
         mpg123_param(aad->mh, MPG123_ADD_FLAGS, MPG123_IGNORE_INFOFRAME, 0);
+#endif
     }
     /* no encoding yet
     else if (adsi->pwfxSrc->wFormatTag == WAVE_FORMAT_PCM &&
-- 
2.11.0

