From 9b7eec683cfb1be664542ae30e73afa6c4b258a0 Mon Sep 17 00:00:00 2001
From: Austin English <austinenglish@gmail.com>
Date: Wed, 28 Dec 2016 02:24:40 -0600
Subject: rstrtmgr: add RmShutdown stub

---
 dlls/rstrtmgr/main.c        | 9 +++++++++
 dlls/rstrtmgr/rstrtmgr.spec | 2 +-
 include/restartmanager.h    | 2 ++
 3 files changed, 12 insertions(+), 1 deletion(-)

diff --git a/dlls/rstrtmgr/main.c b/dlls/rstrtmgr/main.c
index 2d45639a1b3..5c9a8dc1c63 100644
--- a/dlls/rstrtmgr/main.c
+++ b/dlls/rstrtmgr/main.c
@@ -100,3 +100,12 @@ DWORD WINAPI RmEndSession(DWORD handle)
     FIXME("%u stub!\n", handle);
     return ERROR_CALL_NOT_IMPLEMENTED;
 }
+
+/***********************************************************************
+ * RmShutdown (rstrtmgr.@)
+ */
+DWORD WINAPI RmShutdown(DWORD handle, ULONG flags, RM_WRITE_STATUS_CALLBACK status)
+{
+    FIXME("%u, 0x%08x, %p stub!\n", handle, flags, status);
+    return ERROR_CALL_NOT_IMPLEMENTED;
+}
diff --git a/dlls/rstrtmgr/rstrtmgr.spec b/dlls/rstrtmgr/rstrtmgr.spec
index 0e1ba799057..6c6a9c96251 100644
--- a/dlls/rstrtmgr/rstrtmgr.spec
+++ b/dlls/rstrtmgr/rstrtmgr.spec
@@ -8,5 +8,5 @@
 @ stub RmRemoveFilter
 @ stub RmReserveHeap
 @ stdcall RmRestart(long long ptr)
-@ stub RmShutdown
+@ stdcall RmShutdown(long long ptr)
 @ stdcall RmStartSession(ptr long ptr)
diff --git a/include/restartmanager.h b/include/restartmanager.h
index 27c1a92f45a..9ee066d11d3 100644
--- a/include/restartmanager.h
+++ b/include/restartmanager.h
@@ -64,6 +64,8 @@ typedef struct {
     BOOL bRestartable;
 } RM_PROCESS_INFO, *PRM_PROCESS_INFO;
 
+typedef void (CDECL *RM_WRITE_STATUS_CALLBACK)(UINT);
+
 #ifdef __cplusplus
 }
 #endif
-- 
2.11.0

