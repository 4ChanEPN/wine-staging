From 9274fd3f783aceb822e5ba83797cd8b77eee1872 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Michael=20M=C3=BCller?= <michael@fds-team.de>
Date: Thu, 9 Oct 2014 05:08:36 +0200
Subject: msvcp60: basic_string_wchar_dtor needs to return NULL.

---
 dlls/msvcp60/msvcp.h  | 2 +-
 dlls/msvcp60/string.c | 3 ++-
 2 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/dlls/msvcp60/msvcp.h b/dlls/msvcp60/msvcp.h
index 0a8c57c..7a3017c 100644
--- a/dlls/msvcp60/msvcp.h
+++ b/dlls/msvcp60/msvcp.h
@@ -64,7 +64,7 @@ typedef struct
 basic_string_wchar* __thiscall basic_string_wchar_ctor(basic_string_wchar*);
 basic_string_wchar* basic_string_wchar_ctor_cstr(basic_string_wchar*, const wchar_t*);
 basic_string_wchar* basic_string_wchar_ctor_cstr_len(basic_string_wchar*, const wchar_t*, MSVCP_size_t);
-void __thiscall basic_string_wchar_dtor(basic_string_wchar*);
+void* __thiscall basic_string_wchar_dtor(basic_string_wchar*);
 const wchar_t* __thiscall basic_string_wchar_c_str(const basic_string_wchar*);
 void basic_string_wchar_clear(basic_string_wchar*);
 basic_string_wchar* __thiscall basic_string_wchar_append_ch(basic_string_wchar*, wchar_t);
diff --git a/dlls/msvcp60/string.c b/dlls/msvcp60/string.c
index f1b2b8e..b1a6c42 100644
--- a/dlls/msvcp60/string.c
+++ b/dlls/msvcp60/string.c
@@ -2264,10 +2264,11 @@ basic_string_wchar* __thiscall basic_string_wchar_copy_ctor(
 /* ??1?$basic_string@GU?$char_traits@G@std@@V?$allocator@G@2@@std@@QAE@XZ */
 /* ??1?$basic_string@GU?$char_traits@G@std@@V?$allocator@G@2@@std@@QEAA@XZ */
 DEFINE_THISCALL_WRAPPER(basic_string_wchar_dtor, 4)
-void __thiscall basic_string_wchar_dtor(basic_string_wchar *this)
+void* __thiscall basic_string_wchar_dtor(basic_string_wchar *this)
 {
     TRACE("%p\n", this);
     basic_string_wchar__Tidy(this, TRUE);
+    return NULL;
 }
 
 /* ?compare@?$basic_string@GU?$char_traits@G@std@@V?$allocator@G@2@@std@@QBEHIIPBGI@Z */
-- 
1.9.1

