From 6a0540157019fee86dab35dd5e5f8891aa93c3e0 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Michael=20M=C3=BCller?= <michael@fds-team.de>
Date: Mon, 24 Mar 2014 00:05:38 +0100
Subject: dxva2: Added stub dll.

---
 configure.ac           |  1 +
 dlls/dxva2/Makefile.in |  4 ++++
 dlls/dxva2/dxva2.spec  | 37 +++++++++++++++++++++++++++++++++++++
 dlls/dxva2/main.c      | 40 ++++++++++++++++++++++++++++++++++++++++
 4 files changed, 82 insertions(+)
 create mode 100644 dlls/dxva2/Makefile.in
 create mode 100644 dlls/dxva2/dxva2.spec
 create mode 100644 dlls/dxva2/main.c

diff --git a/configure.ac b/configure.ac
index fc425c6..34d2aa2 100644
--- a/configure.ac
+++ b/configure.ac
@@ -2889,6 +2889,7 @@ WINE_CONFIG_LIB(dxerr9)
 WINE_CONFIG_DLL(dxgi,,[implib])
 WINE_CONFIG_TEST(dlls/dxgi/tests)
 WINE_CONFIG_LIB(dxguid)
+WINE_CONFIG_DLL(dxva2)
 WINE_CONFIG_DLL(explorerframe,,[clean])
 WINE_CONFIG_TEST(dlls/explorerframe/tests)
 WINE_CONFIG_DLL(ext-ms-win-gdi-devcaps-l1-1-0)
diff --git a/dlls/dxva2/Makefile.in b/dlls/dxva2/Makefile.in
new file mode 100644
index 0000000..7b9ef6f
--- /dev/null
+++ b/dlls/dxva2/Makefile.in
@@ -0,0 +1,4 @@
+MODULE = dxva2.dll
+
+C_SRCS = \
+	main.c
diff --git a/dlls/dxva2/dxva2.spec b/dlls/dxva2/dxva2.spec
new file mode 100644
index 0000000..da94df3
--- /dev/null
+++ b/dlls/dxva2/dxva2.spec
@@ -0,0 +1,37 @@
+@ stub CapabilitiesRequestAndCapabilitiesReply
+@ stub DXVA2CreateDirect3DDeviceManager9
+@ stub DXVA2CreateVideoService
+@ stub DegaussMonitor
+@ stub DestroyPhysicalMonitor
+@ stub DestroyPhysicalMonitors
+@ stub GetCapabilitiesStringLength
+@ stub GetMonitorBrightness
+@ stub GetMonitorCapabilities
+@ stub GetMonitorColorTemperature
+@ stub GetMonitorContrast
+@ stub GetMonitorDisplayAreaPosition
+@ stub GetMonitorDisplayAreaSize
+@ stub GetMonitorRedGreenOrBlueDrive
+@ stub GetMonitorRedGreenOrBlueGain
+@ stub GetMonitorTechnologyType
+@ stub GetNumberOfPhysicalMonitorsFromHMONITOR
+@ stub GetNumberOfPhysicalMonitorsFromIDirect3DDevice9
+@ stub GetPhysicalMonitorsFromHMONITOR
+@ stub GetPhysicalMonitorsFromIDirect3DDevice9
+@ stub GetTimingReport
+@ stub GetVCPFeatureAndVCPFeatureReply
+@ stub OPMGetVideoOutputsFromHMONITOR
+@ stub OPMGetVideoOutputsFromIDirect3DDevice9Object
+@ stub RestoreMonitorFactoryColorDefaults
+@ stub RestoreMonitorFactoryDefaults
+@ stub SaveCurrentMonitorSettings
+@ stub SaveCurrentSettings
+@ stub SetMonitorBrightness
+@ stub SetMonitorColorTemperature
+@ stub SetMonitorContrast
+@ stub SetMonitorDisplayAreaPosition
+@ stub SetMonitorDisplayAreaSize
+@ stub SetMonitorRedGreenOrBlueDrive
+@ stub SetMonitorRedGreenOrBlueGain
+@ stub SetVCPFeature
+@ stub UABGetCertificate
diff --git a/dlls/dxva2/main.c b/dlls/dxva2/main.c
new file mode 100644
index 0000000..d16320f
--- /dev/null
+++ b/dlls/dxva2/main.c
@@ -0,0 +1,40 @@
+/*
+ * Copyright 2014 Michael MÃ¼ller for Pipelight
+ *
+ * This library is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU Lesser General Public
+ * License as published by the Free Software Foundation; either
+ * version 2.1 of the License, or (at your option) any later version.
+ *
+ * This library is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ * Lesser General Public License for more details.
+ *
+ * You should have received a copy of the GNU Lesser General Public
+ * License along with this library; if not, write to the Free Software
+ * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301, USA
+ */
+
+#include <stdarg.h>
+#include "windef.h"
+#include "winbase.h"
+
+#include "wine/debug.h"
+
+WINE_DEFAULT_DEBUG_CHANNEL(dxva2);
+
+BOOL WINAPI DllMain (HINSTANCE hinstDLL, DWORD fdwReason, LPVOID lpvReserved)
+{
+    TRACE("%p,%x,%p\n", hinstDLL, fdwReason, lpvReserved);
+
+    switch (fdwReason) {
+        case DLL_WINE_PREATTACH:
+            return FALSE;  /* prefer native version */
+        case DLL_PROCESS_ATTACH:
+            DisableThreadLibraryCalls(hinstDLL);
+            break;
+    }
+
+    return TRUE;
+}
-- 
1.8.3.2

