From a70798633f4404744722bc43cde7f2c9e2bcdb26 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Michael=20M=C3=BCller?= <michael@fds-team.de>
Date: Sun, 24 May 2015 03:53:13 +0200
Subject: wbemprox: Treat \r as whitespace.

---
 dlls/wbemprox/tests/query.c | 4 +++-
 dlls/wbemprox/wql.y         | 1 +
 2 files changed, 4 insertions(+), 1 deletion(-)

diff --git a/dlls/wbemprox/tests/query.c b/dlls/wbemprox/tests/query.c
index a7bf201..b46ff52 100644
--- a/dlls/wbemprox/tests/query.c
+++ b/dlls/wbemprox/tests/query.c
@@ -96,7 +96,9 @@ static void test_select( IWbemServices *services )
         {'S','E','L','E','C','T',' ','*',' ','F','R','O','M',' ','W','i','n','3','2','_',
          'D','i','s','k','D','r','i','v','e',' ','W','H','E','R','E',' ','D','e','v','i','c','e','I','D','=',
          '\"','\\','\\','\\','\\','.','\\','\\','P','H','Y','S','I','C','A','L','D','R','I','V','E','0','\"',0};
-    static const WCHAR *test[] = { query1, query2, query3, query4, query5, query6, query7, query8 };
+    static const WCHAR query9[] =
+        {'S','E','L','E','C','T','\n','a','\r','F','R','O','M','\t','b',0};
+    static const WCHAR *test[] = { query1, query2, query3, query4, query5, query6, query7, query8, query9 };
     HRESULT hr;
     IEnumWbemClassObject *result;
     BSTR wql = SysAllocString( wqlW );
diff --git a/dlls/wbemprox/wql.y b/dlls/wbemprox/wql.y
index 6eabe19..734c4da 100644
--- a/dlls/wbemprox/wql.y
+++ b/dlls/wbemprox/wql.y
@@ -583,6 +583,7 @@ static int get_token( const WCHAR *s, int *token )
     {
     case ' ':
     case '\t':
+    case '\r':
     case '\n':
         for (i = 1; isspaceW( s[i] ); i++) {}
         *token = TK_SPACE;
-- 
2.4.0

