From 7d12e333f83b5cec23a07dd9bf2dad1f8fc5dec0 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Michael=20M=C3=BCller?= <michael@fds-team.de>
Date: Sun, 17 Jan 2016 03:08:07 +0100
Subject: ntdll: Move EventSetInformation from advapi32 to ntdll.

---
 dlls/advapi32/advapi32.spec |  2 +-
 dlls/advapi32/eventlog.c    | 10 ----------
 dlls/ntdll/misc.c           | 10 ++++++++++
 dlls/ntdll/ntdll.spec       |  1 +
 4 files changed, 12 insertions(+), 11 deletions(-)

diff --git a/dlls/advapi32/advapi32.spec b/dlls/advapi32/advapi32.spec
index 4868841..0ecd4e9 100644
--- a/dlls/advapi32/advapi32.spec
+++ b/dlls/advapi32/advapi32.spec
@@ -273,7 +273,7 @@
 @ stdcall EventEnabled(int64 ptr)
 @ stdcall EventProviderEnabled(int64 long int64)
 @ stdcall EventRegister(ptr ptr ptr ptr) ntdll.EtwEventRegister
-@ stdcall EventSetInformation(int64 long ptr long)
+@ stdcall EventSetInformation(int64 long ptr long) ntdll.EtwEventSetInformation
 @ stdcall EventUnregister(int64) ntdll.EtwEventUnregister
 @ stdcall EventWrite(int64 ptr long ptr)
 # @ stub EventWriteEndScenario
diff --git a/dlls/advapi32/eventlog.c b/dlls/advapi32/eventlog.c
index 9bd75e8..c1dbb99 100644
--- a/dlls/advapi32/eventlog.c
+++ b/dlls/advapi32/eventlog.c
@@ -880,16 +880,6 @@ ULONG WINAPI EventWriteTransfer( REGHANDLE handle, PCEVENT_DESCRIPTOR descriptor
 }
 
 /******************************************************************************
- * EventSetInformation [ADVAPI32.@]
- */
-ULONG WINAPI EventSetInformation( REGHANDLE handle, EVENT_INFO_CLASS class, PVOID info,
-                                  ULONG length )
-{
-    FIXME("%u, %p, %u\n", class, info, length);
-    return ERROR_SUCCESS;
-}
-
-/******************************************************************************
  * QueryTraceW [ADVAPI32.@]
  */
 ULONG WINAPI QueryTraceW( TRACEHANDLE handle, LPCWSTR sessionname, PEVENT_TRACE_PROPERTIES properties )
diff --git a/dlls/ntdll/misc.c b/dlls/ntdll/misc.c
index ccece31..c7dfd2b 100644
--- a/dlls/ntdll/misc.c
+++ b/dlls/ntdll/misc.c
@@ -388,6 +388,16 @@ ULONG WINAPI EtwEventUnregister( REGHANDLE handle )
     return ERROR_SUCCESS;
 }
 
+/*********************************************************************
+ *                  EtwEventSetInformation   (NTDLL.@)
+ */
+ULONG WINAPI EtwEventSetInformation( REGHANDLE handle, EVENT_INFO_CLASS class, PVOID info,
+                                     ULONG length )
+{
+    FIXME("%u, %p, %u\n", class, info, length);
+    return ERROR_SUCCESS;
+}
+
 /******************************************************************************
  *                  EtwRegisterTraceGuidsW (NTDLL.@)
  *
diff --git a/dlls/ntdll/ntdll.spec b/dlls/ntdll/ntdll.spec
index 0e19dc7..042e34c 100644
--- a/dlls/ntdll/ntdll.spec
+++ b/dlls/ntdll/ntdll.spec
@@ -42,6 +42,7 @@
 @ stub DbgUiWaitStateChange
 @ stdcall DbgUserBreakPoint()
 @ stdcall EtwEventRegister(ptr ptr ptr ptr)
+@ stdcall EtwEventSetInformation(int64 long ptr long)
 @ stdcall EtwEventUnregister(int64)
 @ stdcall EtwRegisterTraceGuidsA(ptr ptr ptr long ptr str str ptr)
 @ stdcall EtwRegisterTraceGuidsW(ptr ptr ptr long ptr wstr wstr ptr)
-- 
2.9.0

