From 0eb3047ec54504764bc6c860fecb465815bb8597 Mon Sep 17 00:00:00 2001
From: Sebastian Lackner <sebastian@fds-team.de>
Date: Mon, 12 Jun 2017 20:07:24 +0200
Subject: Revert "dinput: Assume a 1-to-1 axes map when no axes match."

This reverts commit e87ccb8b055dc846211967e46ee2f17fbabef7a1.
---
 dlls/dinput/joystick_linux.c | 19 +------------------
 1 file changed, 1 insertion(+), 18 deletions(-)

diff --git a/dlls/dinput/joystick_linux.c b/dlls/dinput/joystick_linux.c
index 1032659621e..1f8f94d7382 100644
--- a/dlls/dinput/joystick_linux.c
+++ b/dlls/dinput/joystick_linux.c
@@ -228,36 +228,19 @@ static INT find_joystick_devices(void)
         else
             if ((joydev.dev_axes_map = HeapAlloc(GetProcessHeap(), 0, joydev.axis_count * sizeof(int))))
             {
-                INT j, found_axes = 0;
+                INT j;
 
                 /* Remap to DI numbers */
                 for (j = 0; j < joydev.axis_count; j++)
-                {
                     if (axes_map[j] < 8)
-                    {
                         /* Axis match 1-to-1 */
                         joydev.dev_axes_map[j] = j;
-                        found_axes++;
-                    }
                     else if (axes_map[j] == 16 ||
                              axes_map[j] == 17)
-                    {
                         /* POV axis */
                         joydev.dev_axes_map[j] = 8;
-                        found_axes++;
-                    }
                     else
                         joydev.dev_axes_map[j] = -1;
-                }
-
-                /* If no axes were configured but there are axes assume a 1-to-1 (wii controller) */
-                if (joydev.axis_count && !found_axes)
-                {
-                    ERR("Incoherent joystick data, advertised %d axes, detected 0. Assuming 1-to-1.\n",
-                         joydev.axis_count);
-                    for (j = 0; j < joydev.axis_count; j++)
-                        joydev.dev_axes_map[j] = j;
-                }
             }
 
         /* Find vendor_id and product_id in sysfs */
-- 
2.13.1

