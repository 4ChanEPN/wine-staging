From 8487e09eae89a4926de9327d7cc7c10049064229 Mon Sep 17 00:00:00 2001
From: Alistair Leslie-Hughes <leslie_alistair@hotmail.com>
Date: Wed, 2 Sep 2015 13:19:27 +1000
Subject: dwmapi: Add DwmUpdateThumbnailProperties stub

---
 dlls/dwmapi/dwmapi.spec   |  2 +-
 dlls/dwmapi/dwmapi_main.c |  9 +++++++++
 include/dwmapi.h          | 11 +++++++++++
 3 files changed, 21 insertions(+), 1 deletion(-)

diff --git a/dlls/dwmapi/dwmapi.spec b/dlls/dwmapi/dwmapi.spec
index e83ee22..0985b40 100644
--- a/dlls/dwmapi/dwmapi.spec
+++ b/dlls/dwmapi/dwmapi.spec
@@ -42,4 +42,4 @@
 @ stub DwmSetPresentParameters
 @ stdcall DwmSetWindowAttribute(long long ptr long)
 @ stdcall DwmUnregisterThumbnail(long)
-@ stub DwmUpdateThumbnailProperties
+@ stdcall DwmUpdateThumbnailProperties(long ptr)
diff --git a/dlls/dwmapi/dwmapi_main.c b/dlls/dwmapi/dwmapi_main.c
index 08373b9..a776cfe 100644
--- a/dlls/dwmapi/dwmapi_main.c
+++ b/dlls/dwmapi/dwmapi_main.c
@@ -250,3 +250,12 @@ HRESULT WINAPI DwmDetachMilContent(HWND hwnd)
     FIXME("(%p) stub\n", hwnd);
     return E_NOTIMPL;
 }
+
+/**********************************************************************
+ *           DwmUpdateThumbnailProperties         (DWMAPI.@)
+ */
+HRESULT WINAPI DwmUpdateThumbnailProperties(HTHUMBNAIL thumbnail, const DWM_THUMBNAIL_PROPERTIES *props)
+{
+    FIXME("(%p, %p) stub\n", thumbnail, props);
+    return E_NOTIMPL;
+}
diff --git a/include/dwmapi.h b/include/dwmapi.h
index 3c5ed8f..035c831 100644
--- a/include/dwmapi.h
+++ b/include/dwmapi.h
@@ -107,6 +107,16 @@ typedef struct _DWM_BLURBEHIND
     BOOL fTransitionOnMaximized;
 } DWM_BLURBEHIND, *PDWM_BLURBEHIND;
 
+typedef struct _DWM_THUMBNAIL_PROPERTIES
+{
+    DWORD dwFlags;
+    RECT  rcDestination;
+    RECT  rcSource;
+    BYTE  opacity;
+    BOOL  fVisible;
+    BOOL  fSourceClientAreaOnly;
+} DWM_THUMBNAIL_PROPERTIES, *PDWM_THUMBNAIL_PROPERTIES;
+
 #include <poppack.h>
 
 DWMAPI DwmDefWindowProc(HWND, UINT, WPARAM, LPARAM, LRESULT*);
@@ -121,6 +131,7 @@ DWMAPI DwmIsCompositionEnabled(BOOL*);
 DWMAPI DwmRegisterThumbnail(HWND, HWND, PHTHUMBNAIL);
 DWMAPI DwmSetWindowAttribute(HWND, DWORD, LPCVOID, DWORD);
 DWMAPI DwmUnregisterThumbnail(HTHUMBNAIL);
+DWMAPI DwmUpdateThumbnailProperties(HTHUMBNAIL, const DWM_THUMBNAIL_PROPERTIES *);
 
 #ifdef __cplusplus
 }
-- 
2.5.1

