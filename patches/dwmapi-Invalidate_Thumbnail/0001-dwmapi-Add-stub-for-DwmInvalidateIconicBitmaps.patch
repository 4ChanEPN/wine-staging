From 30201042f9da59a0943902d45f65659226fa3583 Mon Sep 17 00:00:00 2001
From: "Erich E. Hoover" <erich.e.hoover@gmail.com>
Date: Sat, 9 Aug 2014 16:30:53 -0600
Subject: dwmapi: Add stub for DwmInvalidateIconicBitmaps.

---
 dlls/dwmapi/dwmapi.spec   |    1 +
 dlls/dwmapi/dwmapi_main.c |   12 ++++++++++++
 include/dwmapi.h          |    1 +
 3 files changed, 14 insertions(+)

diff --git a/dlls/dwmapi/dwmapi.spec b/dlls/dwmapi/dwmapi.spec
index 5f74970..764f04c 100644
--- a/dlls/dwmapi/dwmapi.spec
+++ b/dlls/dwmapi/dwmapi.spec
@@ -33,6 +33,7 @@
 @ stdcall DwmGetGraphicsStreamTransformHint(long ptr)
 @ stdcall DwmGetTransportAttributes(ptr ptr ptr)
 @ stdcall DwmGetWindowAttribute(ptr long ptr long)
+@ stdcall DwmInvalidateIconicBitmaps(ptr)
 @ stdcall DwmIsCompositionEnabled(ptr)
 @ stub DwmModifyPreviousDxFrameDuration
 @ stub DwmQueryThumbnailSourceSize
diff --git a/dlls/dwmapi/dwmapi_main.c b/dlls/dwmapi/dwmapi_main.c
index 8cc46f0..6ee45af 100644
--- a/dlls/dwmapi/dwmapi_main.c
+++ b/dlls/dwmapi/dwmapi_main.c
@@ -108,6 +108,18 @@ HRESULT WINAPI DwmFlush(void)
 }
 
 /**********************************************************************
+ *        DwmInvalidateIconicBitmaps      (DWMAPI.@)
+ */
+HRESULT WINAPI DwmInvalidateIconicBitmaps(HWND hwnd)
+{
+    static BOOL once;
+
+    if (!once++) FIXME("(%p) stub\n", hwnd);
+
+    return E_NOTIMPL;
+}
+
+/**********************************************************************
  *           DwmSetWindowAttribute         (DWMAPI.@)
  */
 HRESULT WINAPI DwmSetWindowAttribute(HWND hwnd, DWORD attributenum, LPCVOID attribute, DWORD size)
diff --git a/include/dwmapi.h b/include/dwmapi.h
index f85999a..db13b5f 100644
--- a/include/dwmapi.h
+++ b/include/dwmapi.h
@@ -116,6 +116,7 @@ DWMAPI DwmEnableMMCSS(BOOL);
 DWMAPI DwmExtendFrameIntoClientArea(HWND,const MARGINS*);
 DWMAPI DwmGetColorizationColor(DWORD*,BOOL);
 DWMAPI DwmGetCompositionTimingInfo(HWND,DWM_TIMING_INFO*);
+DWMAPI DwmInvalidateIconicBitmaps(HWND);
 DWMAPI DwmIsCompositionEnabled(BOOL*);
 DWMAPI DwmRegisterThumbnail(HWND, HWND, PHTHUMBNAIL);
 DWMAPI DwmSetWindowAttribute(HWND, DWORD, LPCVOID, DWORD);
-- 
1.7.9.5

