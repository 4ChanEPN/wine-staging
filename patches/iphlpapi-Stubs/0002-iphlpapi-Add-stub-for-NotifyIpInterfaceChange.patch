From ea30ba5f4635e50e4874643c220c4fa0e6ac0458 Mon Sep 17 00:00:00 2001
From: Sebastian Lackner <sebastian@fds-team.de>
Date: Mon, 27 Oct 2014 02:50:05 +0100
Subject: iphlpapi: Add stub for NotifyIpInterfaceChange.

Based on a patch by Yann Leretaille.
---
 dlls/iphlpapi/iphlpapi.spec   |  2 +-
 dlls/iphlpapi/iphlpapi_main.c | 12 ++++++++++++
 2 files changed, 13 insertions(+), 1 deletion(-)

diff --git a/dlls/iphlpapi/iphlpapi.spec b/dlls/iphlpapi/iphlpapi.spec
index ccfa6c8..c51b58b 100644
--- a/dlls/iphlpapi/iphlpapi.spec
+++ b/dlls/iphlpapi/iphlpapi.spec
@@ -233,7 +233,7 @@
 @ stub NhpAllocateAndGetInterfaceInfoFromStack
 @ stub NhpGetInterfaceIndexFromStack
 @ stdcall NotifyAddrChange( ptr ptr )
-#@ stub NotifyIpInterfaceChange
+@ stdcall NotifyIpInterfaceChange( long ptr ptr long ptr )
 @ stdcall NotifyRouteChange( ptr ptr )
 #@ stub NotifyRouteChange2
 @ stub NotifyRouteChangeEx
diff --git a/dlls/iphlpapi/iphlpapi_main.c b/dlls/iphlpapi/iphlpapi_main.c
index 967fb06..4fa3e74 100644
--- a/dlls/iphlpapi/iphlpapi_main.c
+++ b/dlls/iphlpapi/iphlpapi_main.c
@@ -2291,6 +2291,18 @@ DWORD WINAPI NotifyAddrChange(PHANDLE Handle, LPOVERLAPPED overlapped)
   return ERROR_IO_PENDING;
 }
 
+/******************************************************************
+ *    NotifyIpInterfaceChange (IPHLPAPI.@)
+ */
+DWORD WINAPI NotifyIpInterfaceChange(ULONG family, PVOID callback, PVOID context,
+                                     BOOLEAN init_notify, PHANDLE handle)
+{
+    FIXME("(family %d, callback %p, context %p, init_notify %d, handle %p): stub\n",
+          family, callback, context, init_notify, handle);
+    if (handle) *handle = NULL;
+    return ERROR_NOT_SUPPORTED;
+}
+
 
 /******************************************************************
  *    NotifyRouteChange (IPHLPAPI.@)
-- 
2.1.2

