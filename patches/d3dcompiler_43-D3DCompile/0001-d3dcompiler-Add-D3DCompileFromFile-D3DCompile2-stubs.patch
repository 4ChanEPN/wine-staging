From 5175515e29522c768439dd8e4464b1b7416a65f9 Mon Sep 17 00:00:00 2001
From: Alistair Leslie-Hughes <leslie_alistair@hotmail.com>
Date: Thu, 23 Jul 2015 19:09:32 +1000
Subject: d3dcompiler: Add D3DCompileFromFile, D3DCompile2 stubs. (try 3)

---
 dlls/d3dcompiler_43/compiler.c          | 22 ++++++++++++++++++++++
 dlls/d3dcompiler_46/d3dcompiler_46.spec |  4 ++--
 dlls/d3dcompiler_47/d3dcompiler_47.spec |  4 ++--
 3 files changed, 26 insertions(+), 4 deletions(-)

diff --git a/dlls/d3dcompiler_43/compiler.c b/dlls/d3dcompiler_43/compiler.c
index 114b4c1..533740d 100644
--- a/dlls/d3dcompiler_43/compiler.c
+++ b/dlls/d3dcompiler_43/compiler.c
@@ -763,3 +763,25 @@ HRESULT WINAPI D3DDisassemble(const void *data, SIZE_T size, UINT flags, const c
             data, size, flags, comments, disassembly);
     return E_NOTIMPL;
 }
+
+HRESULT WINAPI D3DCompileFromFile(const WCHAR *filename, const D3D_SHADER_MACRO *defines, ID3DInclude *includes,
+        const char *entrypoint, const char *target, UINT flags1, UINT flags2, ID3DBlob **code, ID3DBlob **errors)
+{
+    FIXME("filename %s, defines %p, includes %p, entrypoint %s, target %s, flags1 %x, flags2 %x, code %p, errors %p\n",
+            debugstr_w(filename), defines, includes, debugstr_a(entrypoint), debugstr_a(target), flags1, flags2, code, errors);
+
+    return E_NOTIMPL;
+}
+
+HRESULT WINAPI D3DCompile2(const void *srcdata, SIZE_T srcdatasize, const char *sourcename, const D3D_SHADER_MACRO *defines,
+        ID3DInclude *includes, const char *entrypoint, const char *target, UINT flags1, UINT flags2,
+        UINT secondarydataflags, const void *secondarydata, SIZE_T secondarydatasize, ID3DBlob **code,
+        ID3DBlob **errors)
+{
+    FIXME("srcdata %p, srcdatasize %lu, sourcename %s, defines %p, includes %p, entrypoint %s, target %s, "
+            "flags1 %#x, flags2 %#x, secondarydataflags %u, secondarydata %p, secondarydatasize %lu, "
+            "code %p, errors %p\n", srcdata, srcdatasize, debugstr_a(sourcename), defines, includes, debugstr_a(entrypoint),
+            debugstr_a(target), flags1, flags2, secondarydataflags, secondarydata, secondarydatasize, code, errors);
+
+   return E_NOTIMPL;
+}
diff --git a/dlls/d3dcompiler_46/d3dcompiler_46.spec b/dlls/d3dcompiler_46/d3dcompiler_46.spec
index 5811b40..1b145c8a 100644
--- a/dlls/d3dcompiler_46/d3dcompiler_46.spec
+++ b/dlls/d3dcompiler_46/d3dcompiler_46.spec
@@ -1,7 +1,7 @@
 @ stdcall D3DAssemble(ptr long str ptr ptr long ptr ptr)
 @ stdcall D3DCompile(ptr long str ptr ptr str str long long ptr ptr)
-@ stub D3DCompile2
-@ stub D3DCompileFromFile
+@ stdcall D3DCompile2(ptr long str ptr ptr str str long long long ptr long ptr ptr)
+@ stdcall D3DCompileFromFile(wstr ptr ptr str str long long ptr ptr)
 @ stub D3DCompressShaders
 @ stdcall D3DCreateBlob(long ptr)
 @ stub D3DDecompressShaders
diff --git a/dlls/d3dcompiler_47/d3dcompiler_47.spec b/dlls/d3dcompiler_47/d3dcompiler_47.spec
index 40ad977..efa4767 100644
--- a/dlls/d3dcompiler_47/d3dcompiler_47.spec
+++ b/dlls/d3dcompiler_47/d3dcompiler_47.spec
@@ -1,7 +1,7 @@
 @ stdcall D3DAssemble(ptr long str ptr ptr long ptr ptr)
 @ stdcall D3DCompile(ptr long str ptr ptr str str long long ptr ptr)
-@ stub D3DCompile2
-@ stub D3DCompileFromFile
+@ stdcall D3DCompile2(ptr long str ptr ptr str str long long long ptr long ptr ptr)
+@ stdcall D3DCompileFromFile(wstr ptr ptr str str long long ptr ptr)
 @ stub D3DCompressShaders
 @ stdcall D3DCreateBlob(long ptr)
 @ stub D3DCreateFunctionLinkingGraph
-- 
2.4.5

