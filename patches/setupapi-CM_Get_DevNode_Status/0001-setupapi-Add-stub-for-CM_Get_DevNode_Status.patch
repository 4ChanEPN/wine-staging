From 7bbe4b6020cf88e761d539e4617e3d554d50c47f Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Michael=20M=C3=BCller?= <michael@fds-team.de>
Date: Fri, 27 May 2016 02:54:32 +0200
Subject: setupapi: Add stub for CM_Get_DevNode_Status.

---
 dlls/setupapi/setupapi.spec | 2 +-
 dlls/setupapi/stubs.c       | 9 +++++++++
 2 files changed, 10 insertions(+), 1 deletion(-)

diff --git a/dlls/setupapi/setupapi.spec b/dlls/setupapi/setupapi.spec
index 9bfaadd..cc04882 100644
--- a/dlls/setupapi/setupapi.spec
+++ b/dlls/setupapi/setupapi.spec
@@ -71,7 +71,7 @@
 @ stdcall CM_Get_DevNode_Registry_PropertyW(long long ptr ptr long long)
 @ stdcall CM_Get_DevNode_Registry_Property_ExA(long long ptr ptr ptr long ptr)
 @ stdcall CM_Get_DevNode_Registry_Property_ExW(long long ptr ptr ptr long ptr)
-@ stub CM_Get_DevNode_Status
+@ stdcall CM_Get_DevNode_Status(ptr ptr long long)
 @ stub CM_Get_DevNode_Status_Ex
 @ stdcall CM_Get_Device_IDA(ptr ptr long long)
 @ stdcall CM_Get_Device_IDW(ptr ptr long long)
diff --git a/dlls/setupapi/stubs.c b/dlls/setupapi/stubs.c
index ffc766b..ef262d0 100644
--- a/dlls/setupapi/stubs.c
+++ b/dlls/setupapi/stubs.c
@@ -480,6 +480,15 @@ CONFIGRET WINAPI CM_Set_Class_Registry_PropertyW(LPGUID class, ULONG prop, PVOID
 }
 
 /***********************************************************************
+ *      CM_Get_DevNode_Status (SETUPAPI.@)
+ */
+CONFIGRET WINAPI CM_Get_DevNode_Status(ULONG *status, ULONG *problem, DEVINST inst, ULONG flags)
+{
+    FIXME("%p %p 0x%08x 0x%08x: stub\n", status, problem, inst, flags);
+    return CR_FAILURE;
+}
+
+/***********************************************************************
  *              SetupLogFileW  (SETUPAPI.@)
  */
 BOOL WINAPI SetupLogFileW(
-- 
2.8.0

